/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var De=Object.defineProperty;var en=Object.getOwnPropertyDescriptor;var tn=Object.getOwnPropertyNames;var nn=Object.prototype.hasOwnProperty;var qe=(n,e)=>{for(var t in e)De(n,t,{get:e[t],enumerable:!0})},rn=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of tn(e))!nn.call(n,i)&&i!==t&&De(n,i,{get:()=>e[i],enumerable:!(r=en(e,i))||r.enumerable});return n};var on=n=>rn(De({},"__esModule",{value:!0}),n);var pi={};qe(pi,{default:()=>mi});module.exports=on(pi);var M=require("obsidian"),Yt=require("@codemirror/view");var ne="custom-heading-decorator",Ue="reading-custom-heading-decorator",Ve="preview-custom-heading-decorator",je="source-custom-heading-decorator",we="outline-custom-heading-decorator",ie="outline-custom-heading-container",ye="quiet-outline-custom-heading-decorator",re="quiet-outline-custom-heading-container",Fe="file-explorer-custom-heading-decorator",oe="file-explorer-custom-heading-container",k="before-heading-decorator",an="before-inside-heading-decorator",B="after-heading-decorator",sn="after-inside-heading-decorator",Qe="hide-source-number-signs",$e=".el-h1 h1, .el-h2 h2, .el-h3 h3, .el-h4 h4, .el-h5 h5, .el-h6 h6",ae=["H1","H2","H3","H4","H5","H6"],Ke={decimal:"Decimal numbers",lowerAlpha:"Lowercase ASCII letters",upperAlpha:"Uppercase ASCII letters",cjkDecimal:"Han decimal numbers",decimalLeadingZero:"Decimal numbers (padded by initial zeros)",lowerRoman:"Lowercase roman numerals",upperRoman:"Uppercase roman numerals",lowerGreek:"Lowercase classical Greek",lowerLatin:"Lowercase Latin alphabet",upperLatin:"Uppercase Latin alphabet",arabicIndic:"Arabic-Indic numbers",armenian:"Traditional Armenian numbering",bengali:"Bengali numbering",cambodian:"Cambodian numbering",cjkEarthlyBranch:'Han "Earthly Branch" ordinals',cjkHeavenlyStem:'Han "Heavenly Stem" ordinals',devanagari:"Devanagari numbering",georgian:"Traditional Georgian numbering",gujarati:"Gujarati numbering",gurmukhi:"Gurmukhi numbering",hebrew:"Traditional Hebrew numbering",hiragana:"Dictionary-order hiragana lettering",hiraganaIroha:"Iroha-order hiragana lettering",japaneseFormal:"Japanese formal numbering",japaneseInformal:"Japanese informal numbering",kannada:"Kannada numbering",katana:"Dictionary-order katakana lettering",katanaIroha:"Iroha-order katakana lettering",khmer:"Khmer numbering",koreanHangulFormal:"Korean hangul numbering",koreanHanjaFormal:"Formal Korean Han numbering",koreanHanjaInformal:"Korean hanja numbering",lao:"Laotian numbering",lowerArmenian:"Lowercase Armenian numbering",malayalam:"Malayalam numbering",mongolian:"Mongolian numbering",myanmar:"Myanmar (Burmese) numbering",oriya:"Oriya numbering",persian:"Persian numbering",tamil:"Tamil numbering",telugu:"Telugu numbering",thai:"Thai numbering",tibetan:"Tibetan numbering",upperArmenian:"Traditional uppercase Armenian numbering",customIdent:"Custom list styles",string:"Specified string"};function W(){return{enabledInEachNote:!0,opacity:20,position:"before",ordered:!0,orderedDelimiter:".",orderedTrailingDelimiter:!1,orderedStyleType:"decimal",orderedCustomIdents:"\u24B6 \u24B7 \u24B8 \u24B9 \u24BA \u24BB \u24BC \u24BD \u24BE \u24BF \u24C0 \u24C1 \u24C2 \u24C3 \u24C4 \u24C5 \u24C6 \u24C7 \u24C8 \u24C9 \u24CA \u24CB \u24CC \u24CD \u24CE \u24CF",orderedSpecifiedString:"#",orderedAllowZeroLevel:!1,orderedIgnoreSingle:!1,orderedBasedOnExisting:!1,orderedIgnoreMaximum:6,unorderedLevelHeadings:ae.join(" ")}}function ln(){return{...W(),hideNumberSigns:!1}}function _e(){return{metadataKeyword:"heading",fileRegexBlacklist:[],folderBlacklist:[],enabledInReading:!0,readingSettings:W(),enabledInPreview:!0,previewSettings:W(),enabledInSource:!1,sourceSettings:ln(),enabledInOutline:!1,outlineSettings:W(),enabledInQuietOutline:!1,quietOutlineSettings:W(),enabledInFileExplorer:!1,fileExplorerSettings:W()}}function A(n){let e=n.split(/\s+/g).filter(t=>t);return e.length>6?e.slice(0,6):[...ae]}function R(n){return n.split(/\s+/g).filter(e=>e)}function se(n,e){switch(n){case"before":return k;case"after":return B;case"before-inside":return e?k:an;case"after-inside":return e?B:sn;default:return""}}function Le(n,e){return!(n-e>0)}function Ze(n,e){return n===e?!0:(n=n.replaceAll(/\[(.+)\]\(.*\)/g,"$1"),n===e||(n=n.replaceAll(/\[\[.+\|(.+)\]\]/g,"$1"),n===e)||(n=n.replaceAll(/\[\[(.+)#(.+)\]\]/g,"$1 > $2"),n===e)||(n=n.replaceAll(/\[\[#?(.+)\]\]/g,"$1"),n===e)||n.replaceAll(/[-+>`=_~*\\\s]/g,"")===e.replaceAll(/[-+>`=_~*\\\s]/g,""))}function le(n){return n==null?null:typeof n=="boolean"?n:new Set(["true","yes","on","1",1]).has(n)?!0:new Set(["false","no","off","0",0]).has(n)?!1:null}function Ie(n,e){let t={mode:null,all:null},r=n.split(" ").map(i=>i.trim());for(let i of r)switch(i){case`enable-${e}-heading`:t.mode=!0;break;case`disable-${e}-heading`:t.mode=!1;break;case"enable-heading":t.all=!0;break;case"disable-heading":t.all=!1;break}return t}function We(n){let e=n.trim();if(!e)return null;try{return new RegExp(e.substring(1,e.lastIndexOf("/")),e.substring(e.lastIndexOf("/")+1))}catch(t){return null}}function z(n){if(n.trim().startsWith("#")){for(let e=0;e<n.length;e++)if(n[e]!=="#"&&n[e].trim())return e}else for(let e=0;e<n.length;e++)if(n[e].trim())return e;return 0}var Oe=require("obsidian"),_=require("@codemirror/view"),Q=require("@codemirror/state");var Xe=require("@codemirror/view");var ue=class extends Xe.WidgetType{constructor(e,t,r,i){super(),this.isLivePreviwMode=e,this.content=t,this.opacity=r,this.position=i}toDOM(e){let t=this.isLivePreviwMode?Ve:je;return e.dom.createSpan({cls:[ne,t,se(this.position)],text:this.content,attr:{"data-decorator-opacity":`${this.opacity}%`}})}eq(e){return e.isLivePreviwMode===this.isLivePreviwMode&&e.content===this.content&&e.opacity===this.opacity&&e.position===this.position}destroy(e){e.remove()}};var He={};qe(He,{arabicIndic:()=>et,armenian:()=>ge,bengali:()=>tt,cambodian:()=>fe,circle:()=>nt,cjkDecimal:()=>J,cjkEarthlyBranch:()=>it,cjkHeavenlyStem:()=>rt,decimal:()=>me,decimalLeadingZero:()=>ot,devanagari:()=>at,disc:()=>st,georgian:()=>lt,gujarati:()=>ut,gurmukhi:()=>dt,hebrew:()=>ct,hiragana:()=>gt,hiraganaIroha:()=>ft,japaneseFormal:()=>mt,japaneseInformal:()=>pt,kannada:()=>ht,katana:()=>Et,katanaIroha:()=>xt,khmer:()=>vt,koreanHangulFormal:()=>Ct,koreanHanjaFormal:()=>St,koreanHanjaInformal:()=>bt,lao:()=>Dt,lowerAlpha:()=>pe,lowerArmenian:()=>wt,lowerGreek:()=>yt,lowerLatin:()=>Ft,lowerRoman:()=>Lt,malayalam:()=>It,mongolian:()=>kt,myanmar:()=>Bt,oriya:()=>Ht,persian:()=>Ot,square:()=>Tt,tamil:()=>Mt,telugu:()=>At,thai:()=>Rt,tibetan:()=>Nt,upperAlpha:()=>he,upperArmenian:()=>Pt,upperLatin:()=>qt,upperRoman:()=>Ut});function Je(n,e,t,r){let i=n-Number(r);if(i<0)return;if(i<t)return String.fromCharCode(e+i);let o=i%t,a=(i-o-t)/t+1;return Je(a,e,t,r)+String.fromCharCode(e+o)}var ke=Je;function X(n,e){return function(r,i){let o=i-Number(e),a=1;for(;o>=n;)o/=n,a++;return a}}function U(n){return n&&[...n].length||0}var Ge=".\xA0",C="\u3001";var un={suffix:Ge,prefix:null,reversedMarker:!1,reversedCounter:!1,fallback:{renderCounter:n=>n.toString(),maxCounterLenInRange(n,e){return Math.max(this.renderCounter(n).length,this.renderCounter(e).length)}},negative:null,range:{min:-1/0,max:1/0},padding:null},dn={maxLengthInRange(n,e){let t=0;for(let r=Math.max(0,n);r<=e;r++){let i=this.formatter(r);t=Math.max(U(i),t)}return t},withSpecs(n){let e=Object.create(this);return e.specs=Object.assign({},this.specs,n),e},withMaxLengthInRange(n){let e=Object.create(this);return e.maxLengthInRange=n,e}};function Be(n,e=un){let t=Object.create(dn);return t.specs=e,t.formatter=n,t}function V(n){return n&&n.length||0}function Y(n){return Array.from(n).reverse().join("")}var cn={reverseCounter:!1,reversePrefix:!0,reverseSuffix:!0},gn={getAbsoluteMaxLenInRange(n,e,t){var r;let i=this.engine.specs,o=i.range,a=Math.max(n,o.min),d=Math.min(e,o.max),l=Math.max(this.engine.maxLengthInRange(t?Math.abs(d):a,t?Math.abs(a):d)+(t&&i.negative?V(i.negative.prefix)+V(i.negative.suffix):0),((r=i==null?void 0:i.padding)===null||r===void 0?void 0:r.length)||0),u=a>n?i.fallback.maxCounterLenInRange(n,a-1):0,f=d<e?i.fallback.maxCounterLenInRange(d+1,e):0;return Math.max(u,l,f)},maxCounterLenInRange(n,e){return e<n?0:n>=0?this.getAbsoluteMaxLenInRange(n,e,!1):e<=0?this.getAbsoluteMaxLenInRange(n,e,!0):Math.max(this.getAbsoluteMaxLenInRange(n,-1,!0),this.getAbsoluteMaxLenInRange(0,e,!1))},maxMarkerLenInRange(n,e){return e<n?0:this.maxCounterLenInRange(n,e)+V(this.engine.specs.suffix)+V(this.engine.specs.prefix)},renderCounter(n){let e=this.engine.formatter,t=this.engine.specs,r=t.negative,i;if(n<t.range.min||n>t.range.max)return t.fallback.renderCounter(n);let o=r&&n<0?V(r.prefix)+V(r.suffix):0;if(i=e(Math.sign(n)*n),typeof i=="undefined")return t.fallback.renderCounter(n);if(t.padding){let a=U(i)+o;if(a<t.padding.length){let d=t.padding.char.repeat(t.padding.length-a);i=t.padding.right?i+d:d+i}}return n<0&&r&&(i=r.prefix+i+r.suffix),t.reversedCounter?Y(i):i},renderMarker(n){let e=this.engine.specs,t=[e.prefix||"",this.renderCounter(n),e.suffix||""];return e.reversedMarker?t.reverse().join(""):t.join("")},renderPrefix(){return this.engine.specs.prefix||""},renderSuffix(){return this.engine.specs.suffix||""},withFallback(n){return T(this.engine.withSpecs({fallback:n}))},withRange(n,e,t){let r=T(this.engine.withSpecs({range:{min:n,max:e}}));return t?r.withFallback(t):r},withNegative(n,e=""){return T(this.engine.withSpecs({negative:{prefix:n,suffix:e}}))},withPadLeft(n,e){return T(this.engine.withSpecs({padding:{right:!1,char:e,length:n}}))},withPadRight(n,e){return T(this.engine.withSpecs({padding:{right:!0,char:e,length:n}}))},withSuffix(n){return T(this.engine.withSpecs({suffix:n}))},withPrefix(n){return T(this.engine.withSpecs({prefix:n}))},withRtl(n){let e=Object.assign({},cn,n),t=this.engine.specs;return T(this.engine.withSpecs({reversedMarker:!0,reversedCounter:e.reverseCounter,suffix:e.reverseSuffix&&t.suffix?Y(t.suffix):t.suffix,prefix:e.reversePrefix&&t.prefix?Y(t.prefix):t.prefix}))},withMaxLengthComputer(n){return T(this.engine.withMaxLengthInRange((e,t)=>n(e,t,this.engine.maxLengthInRange.bind(this.engine))))}};function T(n){let e=Object.create(gn);return e.engine=n,Object.freeze(e)}var de=(n,e)=>(n%e+e)%e;function N(n){return T(Be(n))}function ce(n,e=0,t){return t=typeof t=="number"?t:n.length,n.slice(e,t+1).reduce((r,i)=>Math.max(r,i),0)}function ze(n,e){return n.withMaxLengthComputer(X(e,!1)).withNegative("-")}function Ye(n,e){return n.withMaxLengthComputer(X(e,!0)).withRange(1,1/0)}var fn=Object.freeze({raw:n=>N(n),cyclic:(...n)=>{let e=n.map(U),t=ce(e);return(n.length===1?N(()=>n[0]):N(i=>n[de(i-1,n.length)])).withMaxLengthComputer((i,o)=>t===1||o-i+1>=n.length?t:ce(e,i-1,o-1))},fixed:(...n)=>{let e=n.map(U),t=ce(e);return N(r=>n[r-1]).withRange(1,n.length).withMaxLengthComputer((r,i)=>t===1?t:ce(e,r-1,i-1))},symbolic:(...n)=>N(e=>n[de(e-1,n.length)].repeat(Math.ceil(e/n.length))).withRange(1,1/0).withMaxLengthComputer((e,t,r)=>r(t<n.length?e:t-n.length,t)),alphabetic:(...n)=>Ye(N(e=>{let t="";for(;e>0;)e--,t=n[de(e,n.length)]+t,e=Math.floor(e/n.length);return t}),n.length),numeric:(...n)=>ze(N(e=>{if(e===0)return n[0];{let t="";for(;e>0;)t=n[de(e,n.length)]+t,e=Math.floor(e/n.length);return t}}),n.length),numericFromUnicodeRange:(n,e)=>ze(N(t=>ke(t,n,e,!1)),e),alphabeticFromUnicodeRange:(n,e)=>Ye(N(t=>ke(t,n,e,!0)),e),additive:n=>{let e=Object.keys(n).map(t=>parseInt(t,10)).sort((t,r)=>r-t);return N(t=>{if(t===0)return n[0];let r="";for(let i of e)if(t>=i&&i>0){let o=Math.floor(t/i);r+=n[i].repeat(o),t-=o*i}return t===0?r:void 0}).withRange(e.length?e[e.length-1]:0,0 in n&&e.length===1?0:e.length?1/0:-1)}}),s=fn;var mn=s.numericFromUnicodeRange(1632,10),et=mn;var pn=s.additive({9e3:"\u0554",8e3:"\u0553",7e3:"\u0552",6e3:"\u0551",5e3:"\u0550",4e3:"\u054F",3e3:"\u054E",2e3:"\u054D",1e3:"\u054C",900:"\u054B",800:"\u054A",700:"\u0549",600:"\u0548",500:"\u0547",400:"\u0546",300:"\u0545",200:"\u0544",100:"\u0543",90:"\u0542",80:"\u0541",70:"\u0540",60:"\u053F",50:"\u053E",40:"\u053D",30:"\u053C",20:"\u053B",10:"\u053A",9:"\u0539",8:"\u0538",7:"\u0537",6:"\u0536",5:"\u0535",4:"\u0534",3:"\u0533",2:"\u0532",1:"\u0531"}).withRange(1,9999),ge=pn;var hn=s.numericFromUnicodeRange(2534,10),tt=hn;var En=s.numericFromUnicodeRange(6112,10),fe=En;var xn=s.cyclic("\u25E6").withSuffix("\xA0"),nt=xn;var vn=s.numeric("\u3007","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D").withSuffix(C),J=vn;var Cn=s.fixed("\u5B50","\u4E11","\u5BC5","\u536F","\u8FB0","\u5DF3","\u5348","\u672A","\u7533","\u9149","\u620C","\u4EA5").withSuffix(C),it=Cn;var Sn=s.fixed("\u7532","\u4E59","\u4E19","\u4E01","\u620A","\u5DF1","\u5E9A","\u8F9B","\u58EC","\u7678").withSuffix(C),rt=Sn;var bn=s.raw(n=>n.toString()).withMaxLengthComputer(X(10,!1)).withNegative("-"),me=bn;var Dn=me.withPadLeft(2,"0"),ot=Dn;var wn=s.numericFromUnicodeRange(2406,10),at=wn;var yn=s.cyclic("\u2022").withSuffix("\xA0"),st=yn;var Fn=s.additive({1e4:"\u10F5",9e3:"\u10F0",8e3:"\u10EF",7e3:"\u10F4",6e3:"\u10EE",5e3:"\u10ED",4e3:"\u10EC",3e3:"\u10EB",2e3:"\u10EA",1e3:"\u10E9",900:"\u10E8",800:"\u10E7",700:"\u10E6",600:"\u10E5",500:"\u10E4",400:"\u10F3",300:"\u10E2",200:"\u10E1",100:"\u10E0",90:"\u10DF",80:"\u10DE",70:"\u10DD",60:"\u10F2",50:"\u10DC",40:"\u10DB",30:"\u10DA",20:"\u10D9",10:"\u10D8",9:"\u10D7",8:"\u10F1",7:"\u10D6",6:"\u10D5",5:"\u10D4",4:"\u10D3",3:"\u10D2",2:"\u10D1",1:"\u10D0"}).withRange(1,19999),lt=Fn;var Ln=s.numericFromUnicodeRange(2790,10),ut=Ln;var In=s.numericFromUnicodeRange(2662,10),dt=In;var kn=s.additive({1e4:"\u05D9\u05F3",9e3:"\u05D8\u05F3",8e3:"\u05D7\u05F3",7e3:"\u05D6\u05F3",6e3:"\u05D5\u05F3",5e3:"\u05D4\u05F3",4e3:"\u05D3\u05F3",3e3:"\u05D2\u05F3",2e3:"\u05D1\u05F3",1e3:"\u05D0\u05F3",900:"\u05E5",800:"\u05E3",700:"\u05DF",600:"\u05DD",500:"\u05DA",400:"\u05EA",300:"\u05E9",200:"\u05E8",100:"\u05E7",90:"\u05E6",80:"\u05E4",70:"\u05E2",60:"\u05E1",50:"\u05E0",40:"\u05DE",30:"\u05DC",20:"\u05DB",19:"\u05D9\u05D8",18:"\u05D9\u05D7",17:"\u05D9\u05D6",16:"\u05D8\u05D6",15:"\u05D8\u05D5",10:"\u05D9",9:"\u05D8",8:"\u05D7",7:"\u05D6",6:"\u05D5",5:"\u05D4",4:"\u05D3",3:"\u05D2",2:"\u05D1",1:"\u05D0"}).withRange(1,10999),ct=kn;var Bn=s.alphabetic("\u3042","\u3044","\u3046","\u3048","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3084","\u3086","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3090","\u3091","\u3092","\u3093").withSuffix(C),gt=Bn;var Hn=s.alphabetic("\u3044","\u308D","\u306F","\u306B","\u307B","\u3078","\u3068","\u3061","\u308A","\u306C","\u308B","\u3092","\u308F","\u304B","\u3088","\u305F","\u308C","\u305D","\u3064","\u306D","\u306A","\u3089","\u3080","\u3046","\u3090","\u306E","\u304A","\u304F","\u3084","\u307E","\u3051","\u3075","\u3053","\u3048","\u3066","\u3042","\u3055","\u304D","\u3086","\u3081","\u307F","\u3057","\u3091","\u3072","\u3082","\u305B","\u3059").withSuffix(C),ft=Hn;var On=s.additive({9e3:"\u4E5D\u9621",8e3:"\u516B\u9621",7e3:"\u4E03\u9621",6e3:"\u516D\u9621",5e3:"\u4F0D\u9621",4e3:"\u56DB\u9621",3e3:"\u53C2\u9621",2e3:"\u5F10\u9621",1e3:"\u58F1\u9621",900:"\u4E5D\u767E",800:"\u516B\u767E",700:"\u4E03\u767E",600:"\u516D\u767E",500:"\u4F0D\u767E",400:"\u56DB\u767E",300:"\u53C2\u767E",200:"\u5F10\u767E",100:"\u58F1\u767E",90:"\u4E5D\u62FE",80:"\u516B\u62FE",70:"\u4E03\u62FE",60:"\u516D\u62FE",50:"\u4F0D\u62FE",40:"\u56DB\u62FE",30:"\u53C2\u62FE",20:"\u5F10\u62FE",10:"\u58F1\u62FE",9:"\u4E5D",8:"\u516B",7:"\u4E03",6:"\u516D",5:"\u4F0D",4:"\u56DB",3:"\u53C2",2:"\u5F10",1:"\u58F1",0:"\u96F6"}).withNegative("\u30DE\u30A4\u30CA\u30B9").withRange(-9999,9999).withFallback(J.withNegative("\u30DE\u30A4\u30CA\u30B9")).withSuffix(C),mt=On;var Tn=s.additive({9e3:"\u4E5D\u5343",8e3:"\u516B\u5343",7e3:"\u4E03\u5343",6e3:"\u516D\u5343",5e3:"\u4E94\u5343",4e3:"\u56DB\u5343",3e3:"\u4E09\u5343",2e3:"\u4E8C\u5343",1e3:"\u5343",900:"\u4E5D\u767E",800:"\u516B\u767E",700:"\u4E03\u767E",600:"\u516D\u767E",500:"\u4E94\u767E",400:"\u56DB\u767E",300:"\u4E09\u767E",200:"\u4E8C\u767E",100:"\u767E",90:"\u4E5D\u5341",80:"\u516B\u5341",70:"\u4E03\u5341",60:"\u516D\u5341",50:"\u4E94\u5341",40:"\u56DB\u5341",30:"\u4E09\u5341",20:"\u4E8C\u5341",10:"\u5341",9:"\u4E5D",8:"\u516B",7:"\u4E03",6:"\u516D",5:"\u4E94",4:"\u56DB",3:"\u4E09",2:"\u4E8C",1:"\u4E00",0:"\u3007"}).withNegative("\u30DE\u30A4\u30CA\u30B9").withRange(-9999,9999).withFallback(J.withNegative("\u30DE\u30A4\u30CA\u30B9")).withSuffix(C),pt=Tn;var Mn=s.numericFromUnicodeRange(3302,10),ht=Mn;var An=s.alphabetic("\u30A2","\u30A4","\u30A6","\u30A8","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E4","\u30E6","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F0","\u30F1","\u30F2","\u30F3").withSuffix(C),Et=An;var Rn=s.alphabetic("\u30A4","\u30ED","\u30CF","\u30CB","\u30DB","\u30D8","\u30C8","\u30C1","\u30EA","\u30CC","\u30EB","\u30F2","\u30EF","\u30AB","\u30E8","\u30BF","\u30EC","\u30BD","\u30C4","\u30CD","\u30CA","\u30E9","\u30E0","\u30A6","\u30F0","\u30CE","\u30AA","\u30AF","\u30E4","\u30DE","\u30B1","\u30D5","\u30B3","\u30A8","\u30C6","\u30A2","\u30B5","\u30AD","\u30E6","\u30E1","\u30DF","\u30B7","\u30F1","\u30D2","\u30E2","\u30BB","\u30B9").withSuffix(C),xt=Rn;var Nn=fe,vt=Nn;var Pn=s.additive({9e3:"\u4E5D\u5343",8e3:"\u516B\u5343",7e3:"\u4E03\u5343",6e3:"\u516D\u5343",5e3:"\u4E94\u5343",4e3:"\u56DB\u5343",3e3:"\u4E09\u5343",2e3:"\u4E8C\u5343",1e3:"\u5343",900:"\u4E5D\u767E",800:"\u516B\u767E",700:"\u4E03\u767E",600:"\u516D\u767E",500:"\u4E94\u767E",400:"\u56DB\u767E",300:"\u4E09\u767E",200:"\u4E8C\u767E",100:"\u767E",90:"\u4E5D\u5341",80:"\u516B\u5341",70:"\u4E03\u5341",60:"\u516D\u5341",50:"\u4E94\u5341",40:"\u56DB\u5341",30:"\u4E09\u5341",20:"\u4E8C\u5341",10:"\u5341",9:"\u4E5D",8:"\u516B",7:"\u4E03",6:"\u516D",5:"\u4E94",4:"\u56DB",3:"\u4E09",2:"\u4E8C",1:"\u4E00",0:"\u96F6"}).withNegative("\uB9C8\uC774\uB108\uC2A4 ").withRange(-9999,9999).withSuffix(C),Ct=Pn;var qn=s.additive({9e3:"\u4E5D\u4EDF",8e3:"\u516B\u4EDF",7e3:"\u4E03\u4EDF",6e3:"\u516D\u4EDF",5e3:"\u4E94\u4EDF",4e3:"\u56DB\u4EDF",3e3:"\u53C3\u4EDF",2e3:"\u8CB3\u4EDF",1e3:"\u58F9\u4EDF",900:"\u4E5D\u767E",800:"\u516B\u767E",700:"\u4E03\u767E",600:"\u516D\u767E",500:"\u4E94\u767E",400:"\u56DB\u767E",300:"\u53C3\u767E",200:"\u8CB3\u767E",100:"\u58F9\u767E",90:"\u4E5D\u62FE",80:"\u516B\u62FE",70:"\u4E03\u62FE",60:"\u516D\u62FE",50:"\u4E94\u62FE",40:"\u56DB\u62FE",30:"\u53C3\u62FE",20:"\u8CB3\u62FE",10:"\u58F9\u62FE",9:"\u4E5D",8:"\u516B",7:"\u4E03",6:"\u516D",5:"\u4E94",4:"\u56DB",3:"\u53C3",2:"\u8CB3",1:"\u58F9",0:"\u96F6"}).withNegative("\uB9C8\uC774\uB108\uC2A4 ").withRange(-9999,9999).withSuffix(C),St=qn;var Un=s.additive({9e3:"\u4E5D\u5343",8e3:"\u516B\u5343",7e3:"\u4E03\u5343",6e3:"\u516D\u5343",5e3:"\u4E94\u5343",4e3:"\u56DB\u5343",3e3:"\u4E09\u5343",2e3:"\u4E8C\u5343",1e3:"\u5343",900:"\u4E5D\u767E",800:"\u516B\u767E",700:"\u4E03\u767E",600:"\u516D\u767E",500:"\u4E94\u767E",400:"\u56DB\u767E",300:"\u4E09\u767E",200:"\u4E8C\u767E",100:"\u767E",90:"\u4E5D\u5341",80:"\u516B\u5341",70:"\u4E03\u5341",60:"\u516D\u5341",50:"\u4E94\u5341",40:"\u56DB\u5341",30:"\u4E09\u5341",20:"\u4E8C\u5341",10:"\u5341",9:"\u4E5D",8:"\u516B",7:"\u4E03",6:"\u516D",5:"\u4E94",4:"\u56DB",3:"\u4E09",2:"\u4E8C",1:"\u4E00",0:"\u96F6"}).withNegative("\uB9C8\uC774\uB108\uC2A4 ").withRange(-9999,9999).withSuffix(C),bt=Un;var Vn=s.numericFromUnicodeRange(3792,10),Dt=Vn;var jn=s.alphabeticFromUnicodeRange(97,26),pe=jn;var Qn=s.additive({9e3:"\u0584",8e3:"\u0583",7e3:"\u0582",6e3:"\u0581",5e3:"\u0580",4e3:"\u057F",3e3:"\u057E",2e3:"\u057D",1e3:"\u057C",900:"\u057B",800:"\u057A",700:"\u0579",600:"\u0578",500:"\u0577",400:"\u0576",300:"\u0575",200:"\u0574",100:"\u0573",90:"\u0572",80:"\u0571",70:"\u0570",60:"\u056F",50:"\u056E",40:"\u056D",30:"\u056C",20:"\u056B",10:"\u056A",9:"\u0569",8:"\u0568",7:"\u0567",6:"\u0566",5:"\u0565",4:"\u0564",3:"\u0563",2:"\u0562",1:"\u0561"}).withRange(1,9999),wt=Qn;var $n=s.alphabeticFromUnicodeRange(945,24),yt=$n;var Ft=pe;var Kn=s.additive({1e3:"m",900:"cm",500:"d",400:"cd",100:"c",90:"xc",50:"l",40:"xl",10:"x",9:"ix",5:"v",4:"iv",1:"i"}).withRange(1,3999),Lt=Kn;var _n=s.numericFromUnicodeRange(3430,10),It=_n;var Zn=s.numericFromUnicodeRange(6160,10),kt=Zn;var Wn=s.numericFromUnicodeRange(4160,10),Bt=Wn;var Xn=s.numericFromUnicodeRange(2918,10),Ht=Xn;var Jn=s.numericFromUnicodeRange(1776,10),Ot=Jn;var Gn=s.cyclic("\u25FE").withSuffix("\xA0"),Tt=Gn;var zn=s.numericFromUnicodeRange(3046,10),Mt=zn;var Yn=s.numericFromUnicodeRange(3174,10),At=Yn;var ei=s.numericFromUnicodeRange(3664,10),Rt=ei;var ti=s.numericFromUnicodeRange(3872,10),Nt=ti;var ni=s.alphabeticFromUnicodeRange(65,26),he=ni;var Pt=ge;var qt=he;var ii=s.additive({1e3:"M",900:"CM",500:"D",400:"CD",100:"C",90:"XC",50:"L",40:"XL",10:"X",9:"IX",5:"V",4:"IV",1:"I"}).withRange(1,3999),Ut=ii;var H=class{constructor(e){this.levels=[0,0,0,0,0,0];this.allowZeroLevel=e,this.highestLevel=6}handler(e){if(e<1||e>6)return[];for(let t=1;t<=6;t++)t<e&&!this.allowZeroLevel&&this.levels[t-1]===0?this.levels[t-1]=1:t>e&&(this.levels[t-1]=0);if(this.levels[e-1]++,this.baseLevels==null){this.baseLevels=[...this.levels];for(let t=1;t<=6;t++)t>e&&(this.baseLevels[t-1]=1)}return e<this.highestLevel&&(this.highestLevel=e),this.levels.slice(0,e)}query(e=!1,t=6){var i;let r=this.highestLevel-1;if(e){let o=(i=this.baseLevels)!=null?i:this.allowZeroLevel?[0,0,0,0,0,1]:[1,1,1,1,1,1];for(let a=0;a<6&&this.levels[a]<o[a]+1;a++)r=a+1;r>t&&(r=t)}return r}},O=class extends H{constructor(e){if(super(e==null?void 0:e.allowZeroLevel),e)if(e.ordered){let{styleType:t,delimiter:r,trailingDelimiter:i,customIdents:o,specifiedString:a,ignoreTopLevel:d}=e;this.decoratorOptions={ordered:!0,styleType:t||"decimal",delimiter:r,trailingDelimiter:i,customIdents:o,specifiedString:a,ignoreTopLevel:d}}else this.decoratorOptions={ordered:!1,levelHeadings:e.levelHeadings||[...ae]};else this.decoratorOptions={ordered:!0,styleType:"decimal"}}decorator(e){let t="";if(e<1||e>6)return t;if(this.decoratorOptions.ordered){let r=[],{styleType:i,delimiter:o=".",trailingDelimiter:a=!1,specifiedString:d="#",customIdents:l=[],ignoreTopLevel:u=0}=this.decoratorOptions,f=this.handler(e).slice(u);switch(i){case"customIdent":r=f.map(g=>g>l.length?g.toString():l[g-1]);break;case"string":r=f.map(()=>d.trim()||"#");break;default:r=f.map(g=>He[i].renderCounter(g))}t=r.join(o),t+=t.length>0&&a?o:""}else t=this.decoratorOptions.levelHeadings[e-1];return t}};var j=class{constructor(){this.METADATA_BORDER="---";this.state="",this.codeBlocks={graveCount:0},this.nextLineNum=1}handler(e,t,r){if(e<this.nextLineNum)return-1;if(this.nextLineNum=e+1,e===1&&t===this.METADATA_BORDER)return this.state="metadata",-1;if(this.state===""){let i=t.match(/^[ ]{0,3}(`{3,})[^`]*$/);if(i)return this.state="codeBlocks",this.codeBlocks.graveCount=i[1].length,-1;let o=t.match(/^[ ]{0,3}\$\$(.*)/);if(o&&!o[1].trim().endsWith("$$"))return this.state="math",-1;if(t.trim()==="-"||t.match(/^\s*-{3,}\s*$/)||/^(?:>|[ ]{4,}|\t|\s*[-+*]\s+)/.test(t))return-1;let a=this.getLevelFromLineText(t);return a===-1&&t.trim()&&(r!=null&&r.trim())&&(a=this.getLevelFromNextLineText(r),a>0&&this.nextLineNum++),a}else{if(this.state==="metadata")t===this.METADATA_BORDER&&(this.state="");else if(this.state==="codeBlocks"){let i=t.match(/^[ ]{0,3}(`{3,})([^`]*)$/);i&&i[1].length>=this.codeBlocks.graveCount&&i[2].trim().length===0&&(this.state="")}else this.state==="math"&&t.trim().endsWith("$$")&&(this.state="");return-1}}getLevelFromLineText(e){let t=-1,r=e.match(/^[ ]{0,3}(#{1,6}\s+|#{1,6}$)/);return r&&(t=r[1].trim().length),t}getLevelFromNextLineText(e){let t=-1;return e.match(/^=+\s*$/)?t=1:e.match(/^(?:-|-{2,}\s*)$/)&&(t=2),t}};var Te=Q.StateEffect.define(),Vt=Q.StateField.define({create(){return _.Decoration.none},update(n,e){for(let t of e.effects)if(t.is(Te))return t.value;return n.map(e.changes)},provide:n=>_.EditorView.decorations.from(n)}),xe=Q.StateEffect.define(),jt=Q.StateField.define({create:()=>!1,update(n,e){for(let t of e.effects)if(t.is(xe))return t.value;return n}}),Ee=class{constructor(e,t){this.getPluginData=t,this.updateDecorations(e,e.state.field(Oe.editorLivePreviewField))}update(e){(e.docChanged||e.viewportChanged||e.transactions.some(t=>t.effects.some(r=>r.is(xe))))&&this.updateDecorations(e.view,e.state.field(Oe.editorLivePreviewField))}destroy(){}async updateDecorations(e,t){let r=await this.getPluginData();if(t&&r.enabledInPreview||!t&&r.enabledInSource){let i=new Q.RangeSetBuilder,o=e.state.doc,{ordered:a,position:d,opacity:l,orderedStyleType:u,orderedDelimiter:f,orderedTrailingDelimiter:g,orderedCustomIdents:p,orderedSpecifiedString:S,orderedIgnoreSingle:h,orderedIgnoreMaximum:x=6,orderedBasedOnExisting:y,orderedAllowZeroLevel:I,unorderedLevelHeadings:w}=t?r.previewSettings:r.sourceSettings,F=0;if(a&&(h||y)){let L=new H(I),E=new j;for(let v=1;v<=o.lines;v++){let Z=o.line(v).text,$=v+1,ee=$<=o.lines?o.line($).text:"",te=E.handler(v,Z,ee);if(te!==-1&&(L.handler(te),F=L.query(h,x),F===0))break}}let D=new O({ordered:a,styleType:u,delimiter:f,trailingDelimiter:g,customIdents:R(p),specifiedString:S,ignoreTopLevel:F,allowZeroLevel:I,levelHeadings:A(w)}),m=new j;for(let L=1;L<=o.lines;L++){let E=o.line(L),v=E.text,P=L+1,Z=P<=o.lines?o.line(P).text:"",$=m.handler(L,v,Z);if($===-1)continue;let ee=D.decorator($);if(ee){let te=new ue(t,ee,l,d),be=_.Decoration.widget({widget:te,side:this.getSide(d),block:!1}),K=null;if(t||r.sourceSettings.hideNumberSigns&&(K=_.Decoration.mark({class:Qe})),d==="before-inside"){let q=t?z(v):0;if(i.add(E.from+q,E.from+q,be),K){let Pe=z(v);Pe>0&&i.add(E.from,E.from+Pe,K)}}else if(d==="before"){if(i.add(E.from,E.from,be),K){let q=z(v);q>0&&i.add(E.from,E.from+q,K)}}else{if(K){let q=z(v);q>0&&i.add(E.from,E.from+q,K)}i.add(E.to,E.to,be)}}}let b=i.finish();e.dispatch({effects:Te.of(b)})}else e.dispatch({effects:Te.of(_.Decoration.none)})}getSide(e){return e.includes("before")?e.includes("inside")?1:-1:e.includes("inside")?-1:1}};var Qt=require("obsidian"),G=class extends Qt.Component{constructor(t,r,i,o,a){super();this.observer=null;this.config={childList:!0,subtree:!0};this.leafId=t,this.view=r,this.containerEl=i,this.decorationCallback=o,this.cancelDecorationCallback=a}equal(t){return this.leafId===t}detach(){this.view&&(this.cancelDecorationCallback(),this.view.removeChild(this))}render(){var t,r;(t=this.observer)==null||t.disconnect(),this.decorationCallback(),this.containerEl&&((r=this.observer)==null||r.observe(this.containerEl,this.config))}onload(){this.decorationCallback(),this.observer=new MutationObserver(()=>{this.render()}),this.containerEl&&this.observer.observe(this.containerEl,this.config)}onunload(){var t,r;(t=this.observer)==null||t.takeRecords(),(r=this.observer)==null||r.disconnect(),this.observer=null,this.containerEl=null,this.view=null}};function $t(n,e,t,r){let{opacity:i,position:o,orderedDelimiter:a,orderedTrailingDelimiter:d,orderedStyleType:l,orderedSpecifiedString:u,orderedCustomIdents:f,orderedIgnoreSingle:g,orderedIgnoreMaximum:p=6,orderedBasedOnExisting:S,orderedAllowZeroLevel:h}=n,x=0;if(g||S){let F=new H(h),D=new j;for(let m=1;m<=r.length;m++){let b=r[m-1],L=m+1,E=L<=r.length?r[L-1]:"",v=D.handler(m,b,E);if(v!==-1&&(F.handler(v),x=F.query(g,p),x===0))break}}let y=new O({ordered:!0,delimiter:a,trailingDelimiter:d,styleType:l,customIdents:R(f),specifiedString:u,ignoreTopLevel:x,allowZeroLevel:h}),I=new j,w=1;t.forEach(F=>{let D=e.getSectionInfo(F);if(!D)return;let m=D.lineStart+1;if(!(m>r.length))for(let b=w;b<=m;b++){let L=r[b-1],E=b+1,v=E<=r.length?r[E-1]:"",P=I.handler(b,L,v);if(b===m){if(_t(F)===P){let $=y.decorator(P);Zt(F,$,i,o)}w=b+1}else y.handler(P)}})}function Kt(n,e){let{opacity:t,position:r,unorderedLevelHeadings:i}=n,o=new O({ordered:!1,levelHeadings:A(i)});e.forEach(a=>{let d=_t(a),l=o.decorator(d);Zt(a,l,t,r)})}function _t(n){switch(n.tagName.toLowerCase()){case"h1":return 1;case"h2":return 2;case"h3":return 3;case"h4":return 4;case"h5":return 5;case"h6":return 6;default:return-1}}function Zt(n,e,t,r){if(e){let i=n.createSpan({cls:[ne,Ue,se(r)],text:e,attr:{"data-decorator-opacity":`${t}%`}});if(r==="before-inside"){let o=n.find(".heading-collapse-indicator");if(o)o.after(i);else{let a=n.firstChild;a?a.before(i):n.appendChild(i)}}else if(r==="before"){let o=n.firstChild;o?o.before(i):n.appendChild(i)}else n.appendChild(i)}}var Me=require("obsidian");function Wt(n,e,t,r){let{opacity:i,position:o,ordered:a,orderedDelimiter:d,orderedTrailingDelimiter:l,orderedStyleType:u,orderedSpecifiedString:f,orderedCustomIdents:g,orderedIgnoreSingle:p,orderedIgnoreMaximum:S=6,orderedBasedOnExisting:h,orderedAllowZeroLevel:x,unorderedLevelHeadings:y}=n;e.classList.add(ie);let I=0;if(a&&(p||h)){let m=new H(x);for(let b of r)if(m.handler(b.level),I=m.query(p,S),I===0)break}let w=new O({ordered:a,delimiter:d,trailingDelimiter:l,styleType:u,customIdents:R(g),specifiedString:f,ignoreTopLevel:I,allowZeroLevel:x,levelHeadings:A(y)}),F=0,D=0;for(let m=0,b=0;m<t.length&&b<r.length;m++,b++){let L=ai(t[m]),E=si(t[m]),v=r[b].level;if(m>0){let Z=Le(L,D);for(;b<r.length-1&&(Le(v,F)!==Z||!li(r[b].heading,E));)w.handler(v),b++,v=r[b].level}let P=w.decorator(v);ri(t[m],P,i,o),F=v,D=L}}function Ae(n){n.classList.contains(ie)&&(n.classList.remove(ie),n.querySelectorAll(".tree-item").forEach(t=>{oi(t)}))}function ri(n,e,t,r){if(e){let i=n.querySelector(".tree-item-self .tree-item-inner");i&&(i.dataset.headingDecorator=e,i.dataset.decoratorOpacity=`${t}%`,i.classList.remove(r==="after"?k:B),i.classList.add(we,r==="after"?B:k))}}function oi(n){let e=n.querySelector(".tree-item-self .tree-item-inner");e&&(delete e.dataset.headingDecorator,delete e.dataset.decoratorOpacity,e.classList.remove(we,k,B))}function ai(n){var r;let e=0,t=n.closest(".tree-item");for(;t;)e++,t=((r=t.parentElement)==null?void 0:r.closest(".tree-item"))||null;return e}function si(n){let e=n.querySelector(".tree-item-self .tree-item-inner");return e?e.innerText:""}function li(n,e){return Ze((0,Me.htmlToMarkdown)(n),(0,Me.htmlToMarkdown)(e))}function Jt(n,e,t){let{opacity:r,position:i,ordered:o,orderedDelimiter:a,orderedTrailingDelimiter:d,orderedStyleType:l,orderedSpecifiedString:u,orderedCustomIdents:f,orderedIgnoreSingle:g,orderedIgnoreMaximum:p=6,orderedBasedOnExisting:S,orderedAllowZeroLevel:h,unorderedLevelHeadings:x}=n;e.classList.add(re);let y=0;if(o&&(g||S)){let w=new H(h);for(let F in t){let D=Xt(t[F]);if(w.handler(D),y=w.query(g,p),y===0)break}}let I=new O({ordered:o,delimiter:a,trailingDelimiter:d,styleType:l,customIdents:R(f),specifiedString:u,ignoreTopLevel:y,allowZeroLevel:h,levelHeadings:A(x)});t.forEach(w=>{let F=Xt(w),D=I.decorator(F);ui(w,D,r,i)})}function Re(n){n.classList.contains(re)&&(n.classList.remove(re),n.querySelectorAll(".n-tree-node").forEach(t=>{di(t)}))}function Xt(n){let e=n.classList;return e.contains("level-1")?1:e.contains("level-2")?2:e.contains("level-3")?3:e.contains("level-4")?4:e.contains("level-5")?5:e.contains("level-6")?6:-1}function ui(n,e,t,r){if(e){let i=n.querySelector(".n-tree-node-content");i&&(i.dataset.headingDecorator=e,i.dataset.decoratorOpacity=`${t}%`,i.classList.remove(r==="after"?k:B),i.classList.add(ye,r==="after"?B:k))}}function di(n){let e=n.querySelector(".n-tree-node-content");e&&(delete e.dataset.headingDecorator,delete e.dataset.decoratorOpacity,e.classList.remove(ye,k,B))}function Gt(n,e,t,r){let{opacity:i,position:o,ordered:a,orderedDelimiter:d,orderedTrailingDelimiter:l,orderedStyleType:u,orderedSpecifiedString:f,orderedCustomIdents:g,orderedIgnoreSingle:p,orderedIgnoreMaximum:S=6,orderedBasedOnExisting:h,orderedAllowZeroLevel:x,unorderedLevelHeadings:y}=n;e.classList.add(oe);let I=0;if(a&&(p||h)){let D=new H(x);for(let m of r)if(D.handler(m.level),I=D.query(p,S),I===0)break}let w=new O({ordered:a,delimiter:d,trailingDelimiter:l,styleType:u,customIdents:R(g),specifiedString:f,ignoreTopLevel:I,allowZeroLevel:x,levelHeadings:A(y)}),F=parseInt(getComputedStyle(document.body).getPropertyValue("--clickable-heading-margin-multiplier"))||10;for(let D=0,m=0;D<t.length&&m<r.length;D++,m++){let b=fi(t[D],F),L=t[D].innerText,E=r[m].level;for(;m<r.length-1&&(E!==b||r[m].heading!==L);)w.handler(E),m++,E=r[m].level;let v=w.decorator(E);ci(t[D],v,i,o)}}function Ne(n){n.classList.contains(oe)&&(n.classList.remove(oe),n.querySelectorAll(".file-heading-container .clickable-heading").forEach(t=>{gi(t)}))}function ci(n,e,t,r){e&&(n.dataset.headingDecorator=e,n.dataset.decoratorOpacity=`${t}%`,n.classList.remove(r==="after"?k:B),n.classList.add(Fe,r==="after"?B:k))}function gi(n){delete n.dataset.headingDecorator,delete n.dataset.decoratorOpacity,n.classList.remove(Fe,k,B)}function fi(n,e){let t=n.style.marginLeft;if(t){let r=parseInt(t.replace("px",""));return Math.floor(r/e)+1}return 0}var c=require("obsidian");var zt=require("obsidian"),ve=class extends zt.AbstractInputSuggest{constructor(t,r){super(t,r);this.app=t;this.textInputEl=r}getSuggestions(t){return this.app.vault.getAllFolders().map(i=>i.path).filter(i=>i.toLowerCase().includes(t.toLowerCase()))}renderSuggestion(t,r){r.setText(t)}};var Ce=class extends c.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty();let t=new c.Setting(e).setName("Metadata keyword").addText(l=>l.setPlaceholder("Enter the keyword").setValue(this.plugin.settings.metadataKeyword).onChange(async u=>{this.plugin.settings.metadataKeyword=u.trim(),await this.plugin.saveSettings()})),r=createFragment();r.append("The key name that reads the enabled status from the ",createEl("a",{href:"https://help.obsidian.md/Editing+and+formatting/Properties",text:"properties"}),"."),t.descEl.appendChild(r),new c.Setting(e).setName("Reading view").setHeading(),new c.Setting(e).setName("Enabled in reading view").setDesc("Allow to decorate the heading under the reading view.").addToggle(l=>l.setValue(this.plugin.settings.enabledInReading).onChange(async u=>{this.plugin.settings.enabledInReading=u,await this.plugin.saveSettings()})),new c.Setting(e).setName("Manage reading view heading decorator").addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageHeadingDecoratorSettings("readingSettings")})}),new c.Setting(e).setName("Live preview").setHeading(),new c.Setting(e).setName("Enabled in live preview").setDesc("Allow to decorate the heading under the live preview.").addToggle(l=>l.setValue(this.plugin.settings.enabledInPreview).onChange(async u=>{this.plugin.settings.enabledInPreview=u,await this.plugin.saveSettings()})),new c.Setting(e).setName("Manage live preview heading decorator").addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageHeadingDecoratorSettings("previewSettings")})}),new c.Setting(e).setName("Source mode").setHeading(),new c.Setting(e).setName("Enabled in source mode").setDesc("Allow to decorate the heading under the source mode.").addToggle(l=>l.setValue(this.plugin.settings.enabledInSource).onChange(async u=>{this.plugin.settings.enabledInSource=u,await this.plugin.saveSettings()})),new c.Setting(e).setName("Manage source mode heading decorator").addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageHeadingDecoratorSettings("sourceSettings")})}),new c.Setting(e).setName("Outline plugin").setHeading(),new c.Setting(e).setName("Enabled in outline plugin").setDesc("Allow to decorate the heading under the outline plugin.").addToggle(l=>l.setValue(this.plugin.settings.enabledInOutline).onChange(async u=>{this.plugin.settings.enabledInOutline=u,await this.plugin.saveSettings()})),new c.Setting(e).setName("Manage outline plugin heading decorator").addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageHeadingDecoratorSettings("outlineSettings")})}),new c.Setting(e).setName("Quiet Outline plugin").setHeading();let i=new c.Setting(e).setName('Enabled in "Quiet Outline" plugin').addToggle(l=>l.setValue(this.plugin.settings.enabledInQuietOutline).onChange(async u=>{this.plugin.settings.enabledInQuietOutline=u,await this.plugin.saveSettings()})),o=createFragment();o.append("Allow to decorate the heading under the ",createEl("a",{href:"https://github.com/guopenghui/obsidian-quiet-outline",text:"Quiet Outline"})," plugin."),i.descEl.appendChild(o),new c.Setting(e).setName('Manage "Quiet Outline" plugin heading decorator').addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageHeadingDecoratorSettings("quietOutlineSettings")})}),new c.Setting(e).setName("Headings in Explorer plugin").setHeading();let a=new c.Setting(e).setName('Enabled in "Headings in Explorer" plugin').addToggle(l=>l.setValue(this.plugin.settings.enabledInFileExplorer).onChange(async u=>{this.plugin.settings.enabledInFileExplorer=u,await this.plugin.saveSettings()})),d=createFragment();d.append("Allow to decorate the heading under the ",createEl("a",{href:"https://github.com/patrickchiang/obsidian-headings-in-explorer",text:"Headings in Explorer"})," plugin."),a.descEl.appendChild(d),new c.Setting(e).setName('Manage "Headings in Explorer" plugin heading decorator').addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageHeadingDecoratorSettings("fileExplorerSettings")})}),new c.Setting(e).setName("Blocklist").setHeading(),new c.Setting(e).setName("Manage folder blocklist").addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageFolderBlacklist(!0)})}),new c.Setting(e).setName("Manage note name regex blocklist").addButton(l=>{l.setButtonText("Manage").onClick(()=>{this.manageFileRegexBlacklist(!0)})})}isOpacityValue(e){return e>=10&&e<=100&&e%10===0}isPositionValue(e){return["before","after","before-inside","after-inside"].includes(e)}manageHeadingDecoratorSettings(e){let{containerEl:t}=this;t.empty();let r="";switch(e){case"readingSettings":r="Manage reading view heading decorator";break;case"previewSettings":r="Manage live preview heading decorator";break;case"sourceSettings":r="Manage source mode heading decorator";break;case"outlineSettings":r="Manage outline plugin heading decorator";break;case"quietOutlineSettings":r='Manage "Quiet Outline" plugin heading decorator';break;case"fileExplorerSettings":r='Manage "Headings in Explorer" plugin heading decorator';break}new c.Setting(t).setName(r).setHeading().addButton(i=>{i.setButtonText("Back").onClick(()=>{this.display()})}),new c.Setting(t).setName("Enabled in each note").setDesc("Toggle this setting to enable the decoration of headings in each note.").addToggle(i=>{var o;return i.setValue((o=this.plugin.settings[e].enabledInEachNote)!=null?o:!0).onChange(async a=>{this.plugin.settings[e].enabledInEachNote=a,await this.plugin.saveSettings()})}),new c.Setting(t).setName("Effect").setHeading(),new c.Setting(t).setName("Ordered").setDesc("Toggle this setting to enable the decoration of headings as an ordered or unordered list.").addToggle(i=>i.setValue(this.plugin.settings[e].ordered).onChange(async o=>{this.plugin.settings[e].ordered=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("Opacity").setDesc("Set the opacity of the heading decorator. The value is the form of percentage.").addSlider(i=>i.setLimits(10,100,10).setValue(this.plugin.settings[e].opacity).onChange(async o=>{this.plugin.settings[e].opacity=this.isOpacityValue(o)?o:20,await this.plugin.saveSettings()}).setDynamicTooltip()),new c.Setting(t).setName("Position").setDesc("Set the position of the heading decorator.").addDropdown(i=>{let o=e==="outlineSettings"||e==="quietOutlineSettings"||e==="fileExplorerSettings"?{before:"Before the heading",after:"After the heading"}:{before:"Before the heading","before-inside":"Before the heading (inside)",after:"After the heading","after-inside":"After the heading (inside)"};i.addOptions(o).setValue(this.plugin.settings[e].position).onChange(async a=>{this.plugin.settings[e].position=this.isPositionValue(a)?a:"before",await this.plugin.saveSettings()})}),new c.Setting(t).setName("Ordered").setHeading(),new c.Setting(t).setName("Style type").setDesc("Set the style type for ordered list.").addDropdown(i=>i.addOptions(Ke).setValue(this.plugin.settings[e].orderedStyleType).onChange(async o=>{this.plugin.settings[e].orderedStyleType=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("Delimiter").setDesc("Set the delimiter for ordered list.").addText(i=>i.setValue(this.plugin.settings[e].orderedDelimiter).onChange(async o=>{this.plugin.settings[e].orderedDelimiter=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("Trailing delimiter").setDesc("Set whether to add a trailing delimiter for ordered list.").addToggle(i=>i.setValue(this.plugin.settings[e].orderedTrailingDelimiter).onChange(async o=>{this.plugin.settings[e].orderedTrailingDelimiter=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("Custom list styles").setDesc('For the "Custom list styles" option. Set custom list styles for ordered list. Use spaces to separate entries.').addText(i=>i.setValue(this.plugin.settings[e].orderedCustomIdents).onChange(async o=>{this.plugin.settings[e].orderedCustomIdents=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("Specified string").setDesc('For the "Specified string" option. Set a specified string for ordered list.').addText(i=>i.setValue(this.plugin.settings[e].orderedSpecifiedString).onChange(async o=>{this.plugin.settings[e].orderedSpecifiedString=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("Allow zero level").setDesc("If the next heading is more than one level higher, the omitted level is zero instead of one.").addToggle(i=>{var o;return i.setValue((o=this.plugin.settings[e].orderedAllowZeroLevel)!=null?o:!1).onChange(async a=>{this.plugin.settings[e].orderedAllowZeroLevel=a,await this.plugin.saveSettings()})}),new c.Setting(t).setName("Based on the existing highest level").setDesc("Use the highest level of headings in the note as the base for ordered list.").addToggle(i=>{var o;return i.setValue((o=this.plugin.settings[e].orderedBasedOnExisting)!=null?o:!1).onChange(async a=>{this.plugin.settings[e].orderedBasedOnExisting=a,await this.plugin.saveSettings()})}),new c.Setting(t).setName("Ignore the single heading at the top-level").setDesc("If the top-level has only a single heading, exclude it when building an ordered list.").addToggle(i=>i.setValue(this.plugin.settings[e].orderedIgnoreSingle).onChange(async o=>{this.plugin.settings[e].orderedIgnoreSingle=o,await this.plugin.saveSettings()})),new c.Setting(t).setName("The maximum number of ignored").setDesc("For enabled: Ignore the single heading at the top-level. The maximum number of ignored headings at the top-level.").addSlider(i=>{var o;return i.setLimits(1,6,1).setValue((o=this.plugin.settings[e].orderedIgnoreMaximum)!=null?o:6).onChange(async a=>{this.plugin.settings[e].orderedIgnoreMaximum=a,await this.plugin.saveSettings()}).setDynamicTooltip()}),new c.Setting(t).setName("Unordered").setHeading(),new c.Setting(t).setName("Level headings").setDesc("Set the names for each level. The value is 6 entries separated by spaces.").addText(i=>i.setValue(this.plugin.settings[e].unorderedLevelHeadings).onChange(async o=>{this.plugin.settings[e].unorderedLevelHeadings=o,await this.plugin.saveSettings()})),e==="sourceSettings"&&(new c.Setting(t).setName("Other").setHeading(),new c.Setting(t).setName("Hide number signs on inactive lines").setDesc("Hide number signs (#) on inactive lines similar to live preview.").addToggle(i=>{var o;i.setValue((o=this.plugin.settings[e].hideNumberSigns)!=null?o:!1).onChange(async a=>{this.plugin.settings[e].hideNumberSigns=a,await this.plugin.saveSettings()})})),t.scrollTo({top:0,behavior:"smooth"})}manageFolderBlacklist(e=!1){let{containerEl:t}=this;t.empty(),new c.Setting(t).setName("Manage folder blocklist").setHeading().addButton(r=>{r.setButtonText("Back").onClick(()=>{this.display()})}),this.plugin.settings.folderBlacklist.forEach((r,i)=>{new c.Setting(t).setName(`Folder blocklist ${i+1}`).addText(o=>{o.setValue(r).onChange(async d=>{this.plugin.settings.folderBlacklist[i]=d,await this.plugin.saveSettings()});let a=new ve(this.app,o.inputEl);a.onSelect(async d=>{o.setValue(d),this.plugin.settings.folderBlacklist[i]=d,a.close(),await this.plugin.saveSettings()})}).addButton(o=>{o.setButtonText("Delete").setWarning().onClick(async()=>{this.plugin.settings.folderBlacklist.splice(i,1),await this.plugin.saveSettings(),this.manageFolderBlacklist()})})}),new c.Setting(t).addButton(r=>{r.setButtonText("Add").setCta().setTooltip("Add a new folder to the blocklist").onClick(async()=>{this.plugin.settings.folderBlacklist.push(""),await this.plugin.saveSettings(),this.manageFolderBlacklist()})}),e&&t.scrollTo({top:0,behavior:"smooth"})}manageFileRegexBlacklist(e=!1){let{containerEl:t}=this;t.empty(),new c.Setting(t).setName("Manage note name regex blocklist").setHeading().addButton(r=>{r.setButtonText("Back").onClick(()=>{this.display()})}),this.plugin.settings.fileRegexBlacklist.forEach((r,i)=>{new c.Setting(t).setName(`Note name regex blocklist ${i+1}`).addText(o=>o.setPlaceholder("e.g., /^daily.*/i").setValue(r).onChange(async a=>{this.plugin.settings.fileRegexBlacklist[i]=a.trim(),await this.plugin.saveSettings()})).addButton(o=>{o.setButtonText("Delete").setWarning().onClick(async()=>{this.plugin.settings.fileRegexBlacklist.splice(i,1),await this.plugin.saveSettings(),this.manageFileRegexBlacklist()})})}),new c.Setting(t).addButton(r=>{r.setButtonText("Add").setCta().setTooltip("Add a new note name regex blocklist").onClick(async()=>{this.plugin.settings.fileRegexBlacklist.push(""),await this.plugin.saveSettings(),this.manageFileRegexBlacklist()})}),e&&t.scrollTo({top:0,behavior:"smooth"})}};var Se=class extends M.Plugin{constructor(){super(...arguments);this.revokes=[];this.outlineIdSet=new Set;this.outlineComponents=[];this.quietOutlineIdSet=new Set;this.quietOutlineComponents=[];this.fileExplorerIdSet=new Set;this.fileExplorerComponents=[];this.debouncedRerenderPreviewMarkdown=(0,M.debounce)(this.rerenderPreviewMarkdown.bind(this),1e3,!0);this.debouncedRerenderOutlineDecorator=(0,M.debounce)(this.rerenderOutlineDecorator.bind(this),1e3,!0);this.debouncedRerenderQuietOutlineDecorator=(0,M.debounce)(this.rerenderQuietOutlineDecorator.bind(this),1e3,!0);this.debouncedRerenderFileExplorerDecorator=(0,M.debounce)(this.rerenderFileExplorerDecorator.bind(this),1e3,!0)}createDeepRevocableProxy(t,r,i,o=new WeakMap,a=""){if(typeof t!="object"||t===null)return{proxy:t,revoke:()=>{}};if(o.has(t))return o.get(t);let d=Proxy.revocable(t,{get:(l,u,f)=>{let g=Reflect.get(l,u,f);if(typeof g=="object"&&g!==null){let p=a?`${a}.${String(u)}`:String(u);return this.createDeepRevocableProxy(g,r,i,o,p).proxy}return g},set:(l,u,f,g)=>{let p=Reflect.get(l,u,g),S=Reflect.set(l,u,f,g);if(p!==f){let h=a?`${a}.${String(u)}`:String(u);r(h,f)}return S}});return i.push(d.revoke),o.set(t,d),d}async loadSettings(){let t=Object.assign(_e(),await this.loadData());this.revokes.forEach(i=>i()),this.revokes=[];let{proxy:r}=this.createDeepRevocableProxy(t,this.settingsChanged.bind(this),this.revokes);this.settings=r}async onload(){await this.loadSettings(),this.registerEditorExtension([Vt,jt,this.craeteHeadingViewPlugin(this.getPluginData.bind(this))]),this.registerMarkdownPostProcessor(async(t,r)=>{if(!this.settings.enabledInReading)return;let i=this.getEnabledFromFrontmatter("reading",r.frontmatter);if(i==null){if(this.settings.readingSettings.enabledInEachNote!=null&&!this.settings.readingSettings.enabledInEachNote||this.getEnabledFromBlacklist(r.sourcePath))return}else if(!i)return;let o=t.findAll($e);if(o.length===0)return;let{ordered:a}=this.settings.readingSettings;if(a){let d=this.getActiveFile(r.sourcePath);if(!d)return;let u=(await this.app.vault.cachedRead(d)).split(`
`);if(u.length===0)return;$t(this.settings.readingSettings,r,o,u)}else Kt(this.settings.readingSettings,o)}),this.registerEvent(this.app.metadataCache.on("changed",(0,M.debounce)(t=>{var r;t&&t.path===((r=this.getActiveFile())==null?void 0:r.path)&&this.rerenderPreviewMarkdown(t)},250,!0))),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{this.handleModeChange(),this.loadOutlineComponents(),this.loadQuietOutlineComponents(),this.loadFileExplorerComponents()})),this.registerEvent(this.app.workspace.on("layout-change",()=>{this.handleModeChange(),this.loadOutlineComponents(),this.loadQuietOutlineComponents(),this.loadFileExplorerComponents()})),this.loadOutlineComponents(),this.loadQuietOutlineComponents(),this.loadFileExplorerComponents(),this.addSettingTab(new Ce(this.app,this))}onunload(){this.unloadOutlineComponents(),this.unloadQuietOutlineComponents(),this.unloadFileExplorerComponents(),this.revokes.forEach(t=>t()),this.revokes=[]}async saveSettings(){await this.saveData(this.settings)}settingsChanged(t,r){t==="enabledInOutline"?r?this.loadOutlineComponents():this.unloadOutlineComponents():t==="enabledInQuietOutline"?r?this.loadQuietOutlineComponents():this.unloadQuietOutlineComponents():t==="enabledInFileExplorer"?r?this.loadFileExplorerComponents():this.unloadFileExplorerComponents():t.startsWith("outlineSettings")?this.debouncedRerenderOutlineDecorator():t.startsWith("quietOutlineSettings")?this.debouncedRerenderQuietOutlineDecorator():t.startsWith("fileExplorerSettings")?this.debouncedRerenderFileExplorerDecorator():t==="enabledInReading"||t.startsWith("readingSettings")?this.debouncedRerenderPreviewMarkdown():(t==="metadataKeyword"||t.startsWith("fileRegexBlacklist")||t.startsWith("folderBlacklist"))&&(this.debouncedRerenderPreviewMarkdown(),this.debouncedRerenderOutlineDecorator(),this.debouncedRerenderQuietOutlineDecorator(),this.debouncedRerenderFileExplorerDecorator())}loadOutlineComponents(){this.settings.enabledInOutline&&this.handleOutline()}unloadOutlineComponents(){this.outlineComponents.forEach(t=>t.detach()),this.outlineComponents=[],this.outlineIdSet.clear()}loadQuietOutlineComponents(){this.settings.enabledInQuietOutline&&this.handleQuietOutline()}unloadQuietOutlineComponents(){this.quietOutlineComponents.forEach(t=>t.detach()),this.quietOutlineComponents=[],this.quietOutlineIdSet.clear()}loadFileExplorerComponents(){this.settings.enabledInFileExplorer&&this.handleHeadingsInExplorer()}unloadFileExplorerComponents(){this.fileExplorerComponents.forEach(t=>t.detach()),this.fileExplorerComponents=[],this.fileExplorerIdSet.clear()}craeteHeadingViewPlugin(t){return Yt.ViewPlugin.fromClass(class extends Ee{constructor(r){super(r,t)}})}handleModeChange(){let t=this.app.workspace.getActiveViewOfType(M.MarkdownView);if(t){let r=t.getMode()==="source",i=t.editor.cm;i&&i.dispatch({effects:xe.of(r)})}}handleOutline(){this.app.workspace.getLeavesOfType("outline").forEach(r=>{let i=r.id;if(!i||this.outlineIdSet.has(i))return;let o=r.view,a=o.containerEl.querySelector('[data-type="outline"] .view-content');if(!a)return;this.outlineIdSet.add(i);let d=new G(i,o,a,()=>{let l=a.querySelectorAll(".tree-item");if(l.length===0)return;let u=o.getState();if(typeof u.file!="string")return;let f=this.app.vault.getFileByPath(u.file);if(!f)return;let g=this.app.metadataCache.getFileCache(f);if(!g)return;let p=g.headings||[];if(p.length===0)return;let S=g.frontmatter,h=this.getEnabledFromFrontmatter("outline",S),{enabledInEachNote:x}=this.settings.outlineSettings,y=!0;h==null?(x!=null&&!x&&(y=!1),this.getEnabledFromBlacklist(u.file)&&(y=!1)):h||(y=!1),y?Wt(this.settings.outlineSettings,a,l,p):Ae(a)},()=>{a&&Ae(a)});this.outlineComponents.push(d),o.addChild(d),o.register(()=>{this.outlineComponents=this.outlineComponents.filter(l=>!l.equal(i))})})}handleQuietOutline(){this.app.workspace.getLeavesOfType("quiet-outline").forEach(r=>{let i=r.id;if(!i||this.quietOutlineIdSet.has(i))return;let o=r.view,a=o.containerEl.querySelector('[data-type="quiet-outline"] .view-content');if(!a)return;this.quietOutlineIdSet.add(i);let d=new G(i,o,a,()=>{let l=a.querySelector(".n-tree");if(!l)return;let u=a.querySelectorAll(".n-tree-node");if(u.length===0)return;let f=this.getActiveFile();if(!f)return;let g=this.app.metadataCache.getFileCache(f);if(!g)return;let p=g.frontmatter,S=this.getEnabledFromFrontmatter("quiet-outline",p),{enabledInEachNote:h}=this.settings.quietOutlineSettings,x=!0;S==null?(h!=null&&!h&&(x=!1),this.getEnabledFromBlacklist(f.path)&&(x=!1)):S||(x=!1),x?Jt(this.settings.quietOutlineSettings,l,u):Re(l)},()=>{let l=a.querySelector(".n-tree");l&&Re(l)});this.quietOutlineComponents.push(d),o.addChild(d),o.register(()=>{this.quietOutlineComponents=this.quietOutlineComponents.filter(l=>!l.equal(i))})})}handleHeadingsInExplorer(){this.app.workspace.getLeavesOfType("file-explorer").forEach(r=>{let i=r.id;if(!i||this.fileExplorerIdSet.has(i))return;let o=r.view,a=o.containerEl.querySelector('[data-type="file-explorer"] .nav-files-container');if(!a)return;this.fileExplorerIdSet.add(i);let d=new G(i,o,a,()=>{a.querySelectorAll(".nav-file-title").forEach(u=>{let f=u.querySelectorAll(".file-heading-container .clickable-heading");if(f.length===0)return;let g=u.dataset.path;if(!g)return;let p=this.app.vault.getFileByPath(g);if(!p)return;let S=this.app.metadataCache.getFileCache(p);if(!S)return;let h=S.headings||[];if(h.length===0)return;let x=S.frontmatter,y=this.getEnabledFromFrontmatter("file-explorer",x),{enabledInEachNote:I}=this.settings.fileExplorerSettings,w=!0;y==null?(I!=null&&!I&&(w=!1),this.getEnabledFromBlacklist(g)&&(w=!1)):y||(w=!1),w?Gt(this.settings.fileExplorerSettings,u,f,h):Ne(u)})},()=>{a.querySelectorAll(".nav-file-title").forEach(u=>{Ne(u)})});this.fileExplorerComponents.push(d),o.addChild(d),o.register(()=>{this.fileExplorerComponents=this.fileExplorerComponents.filter(l=>!l.equal(i))})})}rerenderPreviewMarkdown(t){let r=this.app.workspace.getActiveViewOfType(M.MarkdownView);r&&(!t||t===r.file)&&r.previewMode.rerender(!0)}rerenderOutlineDecorator(){this.outlineComponents.forEach(t=>t.render())}rerenderQuietOutlineDecorator(){this.quietOutlineComponents.forEach(t=>t.render())}rerenderFileExplorerDecorator(){this.fileExplorerComponents.forEach(t=>t.render())}async getPluginData(){var u,f,g,p,S;let{metadataKeyword:t,enabledInPreview:r,enabledInSource:i,previewSettings:o,sourceSettings:a}=this.settings,d=r,l=i;if(t){let h=this.getActiveFile();if(h){let x=(u=this.app.metadataCache.getFileCache(h))==null?void 0:u.frontmatter;r&&(d=(g=(f=this.getEnabledFromFrontmatter("preview",x))!=null?f:o.enabledInEachNote)!=null?g:!this.getEnabledFromBlacklist(h.path)),i&&(l=(S=(p=this.getEnabledFromFrontmatter("source",x))!=null?p:a.enabledInEachNote)!=null?S:!this.getEnabledFromBlacklist(h.path))}}return{enabledInPreview:d,enabledInSource:l,previewSettings:o,sourceSettings:a}}getActiveFile(t){return t?this.app.vault.getFileByPath(t):this.app.workspace.getActiveFile()}getEnabledFromFrontmatter(t,r){var o,a;let i=this.settings.metadataKeyword;if(i&&typeof r=="object"&&r){let d=r[i];if(typeof d=="object"&&d)return(o=le(d[t]))!=null?o:le(d.all);if(d!=null)return le(d);{let l=r.cssclasses;if(Array.isArray(l)){let u={mode:null,all:null};for(let f of l)if(typeof f=="string"){let{mode:g,all:p}=Ie(f,t);g!=null&&(u.mode=g),p!=null&&(u.all=p)}return(a=u.mode)!=null?a:u.all}else if(typeof l=="string"){let{mode:u,all:f}=Ie(l,t);return u!=null?u:f}}}return null}getEnabledFromBlacklist(t){for(let i of this.settings.folderBlacklist)if(t.startsWith(`${i}/`))return!0;let r=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));for(let i of this.settings.fileRegexBlacklist){let o=We(i);if(o&&o.test(r))return!0}return!1}};var mi=Se;
//! Delay trigger rerender

/* nosourcemap */